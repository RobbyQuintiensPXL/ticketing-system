version: '3.7'
services:
    config:
        image: config-service:0.0.1-SNAPSHOT
        restart: always
        ports:
            - "8888:8888"  
    event-service:
        image: event-service:0.0.1-SNAPSHOT
        ports:
            - "8081:8081"
        depends_on:
            - consul
    database:
        image: mysql:latest
        ports:
          - "3306:3306"
        volumes:
            - ./init.sql:/docker-entrypoint-initdb.d/1-init.sql
    consul:
        image: consul:latest
        ports:
            - "8500:8500"
        command: "agent -retry-join consul-server-bootstrap -client 0.0.0.0"